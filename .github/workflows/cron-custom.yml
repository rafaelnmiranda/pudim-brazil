name: Cron Job - Tarefas Customizadas

on:
  schedule:
    # Exemplos de horÃ¡rios (ajuste conforme necessÃ¡rio):
    # '0 0 * * *' - Diariamente Ã  meia-noite UTC
    # '0 */6 * * *' - A cada 6 horas
    # '0 9 * * 1' - Toda segunda-feira Ã s 9h UTC
    # '0 0 1 * *' - Primeiro dia de cada mÃªs Ã  meia-noite UTC
    - cron: '0 2 * * *'  # Diariamente Ã s 2h UTC
  workflow_dispatch:
    inputs:
      task:
        description: 'Tarefa a executar'
        required: false
        default: 'all'
        type: choice
        options:
          - all
          - build
          - lint
          - test

jobs:
  custom-tasks:
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout cÃ³digo
        uses: actions/checkout@v4

      - name: Configurar Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'
          cache: 'npm'

      - name: Instalar dependÃªncias
        run: npm ci

      - name: Executar tarefa selecionada
        run: |
          TASK="${{ github.event.inputs.task || 'all' }}"
          
          case $TASK in
            build)
              echo "ğŸ”¨ Executando build..."
              npm run build
              ;;
            lint)
              echo "ğŸ” Executando lint..."
              npm run lint
              ;;
            test)
              echo "ğŸ§ª Executando testes..."
              # Adicione seu comando de teste aqui quando disponÃ­vel
              echo "âš ï¸ Testes nÃ£o configurados ainda"
              ;;
            all)
              echo "ğŸš€ Executando todas as tarefas..."
              npm run lint
              npm run build
              ;;
          esac
        env:
          # Adicione variÃ¡veis de ambiente aqui se necessÃ¡rio
          # NEXT_PUBLIC_SITE_URL: ${{ secrets.NEXT_PUBLIC_SITE_URL }}

      - name: Resumo
        if: always()
        run: |
          echo "âœ… Tarefa cron executada em $(date)"
          echo "ğŸ“… PrÃ³xima execuÃ§Ã£o agendada conforme configuraÃ§Ã£o do cron"
